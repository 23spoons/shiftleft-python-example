variables:
- group: shiftleft-token

pool:
  vmImage: 'windows-latest'
container: shiftleft/inspect:latest
steps:
- task: CmdLine@2
  displayName: Analyze with Inspect
  inputs:
    script: |      
      sl scan --verbose --no-diagnostic --force --version-id 1 --app ShiftLeftPythonAz branch=$(Build.SourceBranchName) --python $(Build.SourcesDirectory)
    workingDirectory: '$(Build.SourcesDirectory)'
  env:
    SHIFTLEFT_ORG_ID: $(SHIFTLEFT_ORG_ID)
    SHIFTLEFT_ACCESS_TOKEN: $(SHIFTLEFT_ACCESS_TOKEN)
    SHIFTLEFT_API_TOKEN: $(SHIFTLEFT_API_TOKEN)
